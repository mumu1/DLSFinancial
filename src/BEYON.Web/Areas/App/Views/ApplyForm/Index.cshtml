@using BEYON.Domain.Model.Member
@{

}

<div class="content-wrapper">
    <!-- Main content -->
    <section class="content" id="permissionSection">
        <div class="panel-body" style="padding-bottom:0px;">
            <div class="panel panel-default">
                <div class="panel-heading">申请单查询条件</div>
                <div class="panel-body">
                    <form id="formSearch" class="form-horizontal">
                        <div class="form-group" style="margin-top: 15px">
                            <label class="control-label  col-sm-1" for="txt_search_permissionname">权限名称</label>
                            <div class=" col-sm-3">
                                <input type="text" class="form-control" id="txt_search_permissionname">
                            </div>
                            <label class="control-label col-sm-1">是否激活</label>
                            <div class="col-sm-4" style="text-align:right;">
                                <button type="button" style="margin-right:100px" id="btn_query" class="btn btn-primary">查询</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-body">
                    <div class="jarviswidget jarviswidget-color-darken jarviswidget-sortable" id="wid-id-0" data-widget-editbutton="false" role="widget">
                        <div>

                            <!-- widget edit box -->
                            <div class="jarviswidget-editbox">
                                <!-- This area used as dropdown edit box -->

                            </div>
                            <!-- end widget edit box -->
                            <!-- widget content -->
                            <div class="widget-body">
                                <table id="datatable_tabletools" class="table table-striped table-bordered table-hover" width="100%"></table>
                            </div>
                            <!-- end widget content -->

                        </div>
                        <!-- end widget div -->
                    </div>
                    <!-- end widget -->
                </div>
            </div>
        </div>
        @Html.Partial("_ModalForm")
    </section><!-- /.content -->
</div><!-- /.content-wrapper -->
@*@section scripts{*@

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script>
<script src="@Url.Content("~/Scripts/Custom/TableOperation.js")"></script>
<script src="@Url.Content("~/Scripts/Custom/ModalForm.js")"></script>

<script>
    pageSetUp();

    // pagefunction
    var pagefunction = function () {
        initTable();
    };
    // end pagefunction

    // destroy generated instances
    // pagedestroy is called automatically before loading a new page
    // only usable in AJAX version!
    var pagedestroy = function () {

    }
    // end destroy

    pagefunction();

    function initTable() {
        //更新数据
        //if ($.fn.dataTable.isDataTable('#datatable_tabletools')) {
        //var oSettings = table.fnSettings();
        //table.fnClearTable(this);
        //for (var i = 0; i < data.rows.length; i++) {
        //    table.oApi._fnAddData(oSettings, data.rows[i]);
        //}

        //oSettings.aiDisplay = oSettings.aiDisplayMaster.slice();
        //table.fnDraw();
        //return;
        //}

        var buttons = [
            {
                text: "新增", action: function (e, dt, node, config) {

                }
            },
            {
                text: "修改", action: function (e, dt, node, config) {

                }
            },
            {
                text: "删除", action: function (e, dt, node, config) {

                }
            },
            {
                text: "提交",
                action: function (e, dt, node, config) {
                    dt.ajax.reload();
                }
            },
            {
                text: "撤回",
                action: function (e, dt, node, config) {
                    dt.ajax.reload();
                }
            }
        ];

        //如果是管理员
        //if (true) {
        //    buttons = [
        //        {
        //            text: "审核",
        //            action: function (e, dt, node, config) {
        //                dt.ajax.reload();
        //            }
        //        },
        //        {
        //            extend: 'collection',
        //            text: '导出',
        //            buttons: [
        //                { text: "拷贝", extend: 'copy' },
        //                { text: "EXCEL表格", extend: 'excel' },
        //                { text: "CSV表格", extend: 'csv' },
        //                { text: "PDF文档", extend: 'pdf' }
        //            ]
        //        }
        //    ]
        //}

        table = $('#datatable_tabletools').dataTable({
            dom: 'Bfrtip',
            ajax: '@Url.Action("GetAllData")',
            searching: true,
            ordering: true,
            select: true,
            info: true,
            paginate: false, //是否显示（应用）分页器
            sort: true, //是否启动各个字段的排序功能
            stateSave: false,
            stateDuration: 60 * 60 * 12,
            autoWidth: true,
            bProcessing: true,
            paging: false,
            buttons: buttons,
            columns: [
                { data: "SerialNumber", title: "申请单流水号" },
                { data: "ProjectNumber", title: "课题号" },
                { data: "RefundType", title: "报销事由" },
                { data: "ProjectDirector", title: "课题负责人", visible: false },
                { data: "Agent", title: "经办人" },
                { data: "SubmitTime", title: "提交时间" },
                { data: "AuditStatus", title: "审核状态" },
                { data: "AuditTime", title: "审核时间", visible: false },
                { data: "AuditOpinion", title: "审核意见", visible: false },
                { data: "Summation", title: "报销合计", visible: false }
            ],
            oLanguage: {
                "sLengthMenu": "每页显示 _MENU_ 条记录",
                "sZeroRecords": "抱歉， 没有找到",
                "sInfo": "显示 _START_ 到 _END_ 条记录，总共 _TOTAL_ 条记录",
                "sInfoEmpty": "没有数据",
                "sInfoFiltered": "(从 _MAX_ 条数据中检索)",
                "sZeroRecords": "没有检索到数据",
                "sSearch": "搜索名称:",
                "sSelected": "选中 _TOTAL_ 条记录",
                "oPaginate": {
                    "sFirst": "首页",
                    "sPrevious": "前一页",
                    "sNext": "后一页",
                    "sLast": "尾页"
                }
            }
        });

        

        
    }
</script>
@*}*@



